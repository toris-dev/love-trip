# ADR-001: 모노레포 구조 채택

**상태**: ✅ 채택됨

**날짜**: 2024-01-01

**결정**: pnpm workspace를 사용한 모노레포 구조 채택

## 맥락

LOVETRIP 프로젝트는 여러 도메인(여행 계획, 경비 관리, 추천 시스템, 게이미피케이션 등)을 포함하는 복잡한 애플리케이션입니다. 초기에는 단일 저장소 구조였지만, 다음과 같은 문제가 발생했습니다:

1. **코드 구조의 복잡성**: 모든 코드가 `apps/web/src`에 집중되어 구조 파악이 어려움
2. **재사용성 부족**: 공통 컴포넌트와 유틸리티가 특정 앱에 종속됨
3. **타입 공유의 어려움**: 도메인 간 타입 공유가 어려움
4. **확장성 제한**: 향후 모바일 앱이나 다른 플랫폼 추가 시 코드 재사용 어려움

## 결정 이유

### 1. 도메인별 명확한 책임 분리

각 도메인을 독립적인 패키지로 분리하여:

- 코드 구조가 명확해짐
- 각 패키지의 책임이 명확해짐
- 유지보수가 쉬워짐

### 2. 코드 재사용성 향상

공통 코드를 패키지로 추출하여:

- 여러 앱에서 재사용 가능
- 중복 코드 제거
- 일관된 API 제공

### 3. 타입 안정성 향상

`packages/shared/types`를 통해:

- 데이터베이스 스키마에서 클라이언트까지 타입 공유
- 컴파일 타임 타입 체크
- 자동완성 지원

### 4. 확장성

향후 확장 시:

- 새로운 앱 추가 용이 (예: 모바일 앱)
- 마이크로서비스 전환 용이
- 독립적인 배포 가능

## 대안

### 대안 1: 멀티레포 (Multi-repo)

각 도메인을 별도 저장소로 관리

**장점**:

- 완전한 독립성
- 독립적인 배포

**단점**:

- 코드 공유 어려움
- 의존성 관리 복잡
- 타입 공유 어려움

### 대안 2: 단일 저장소 유지

현재 구조 유지

**장점**:

- 간단한 구조
- 초기 설정 용이

**단점**:

- 코드 구조 복잡
- 재사용성 부족
- 확장성 제한

## 결과

### 긍정적 결과

✅ **도메인별 명확한 책임 분리**

- 각 패키지가 명확한 역할을 가짐
- 코드 구조 파악이 쉬워짐

✅ **코드 재사용성 향상**

- 공통 컴포넌트와 유틸리티를 패키지로 추출
- 중복 코드 제거

✅ **타입 안정성 향상**

- 엔드투엔드 타입 공유
- 컴파일 타임 타입 체크

✅ **확장성**

- 새로운 앱 추가 용이
- 독립적인 개발 및 배포 가능

### 부정적 결과

⚠️ **초기 설정 복잡도 증가**

- pnpm workspace 설정 필요
- 각 패키지의 package.json 관리 필요

⚠️ **빌드 시간 증가 가능성**

- 여러 패키지 빌드로 인한 시간 증가
- 의존성 해결 시간 증가

⚠️ **학습 곡선**

- 모노레포 구조에 대한 이해 필요
- 패키지 간 의존성 관리 방법 학습 필요

## 관련 문서

- [아키텍처 문서](../architecture.md)
- [프로젝트 기획서](../project-plan.md)
- [개발 가이드](../development-guide.md)
