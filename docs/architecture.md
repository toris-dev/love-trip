# π— LOVETRIP μ•„ν‚¤ν…μ² λ¬Έμ„

## π“‹ λ©μ°¨

- [μ‹μ¤ν… κ°μ”](#μ‹μ¤ν…-κ°μ”)
- [μ•„ν‚¤ν…μ² μ›μΉ™](#μ•„ν‚¤ν…μ²-μ›μΉ™)
- [λ¨λ…Έλ ν¬ κµ¬μ΅°](#λ¨λ…Έλ ν¬-κµ¬μ΅°)
- [λ μ΄μ–΄ κµ¬μ΅°](#λ μ΄μ–΄-κµ¬μ΅°)
- [λ°μ΄ν„° νλ¦„](#λ°μ΄ν„°-νλ¦„)
- [κΈ°μ  μ¤νƒ](#κΈ°μ -μ¤νƒ)

## π― μ‹μ¤ν… κ°μ”

LOVETRIPμ€ **λ¨λ…Έλ ν¬(Monorepo)** κµ¬μ΅°λ¥Ό μ‚¬μ©ν•λ” Next.js κΈ°λ° ν’€μ¤νƒ μ• ν”λ¦¬μΌ€μ΄μ…μ…λ‹λ‹¤.

### ν•µμ‹¬ μ„¤κ³„ μ›μΉ™

1. **λ„λ©”μΈ μ£Όλ„ μ„¤κ³„ (DDD)**: λΉ„μ¦λ‹μ¤ λ„λ©”μΈλ³„λ΅ ν¨ν‚¤μ§€ λ¶„λ¦¬
2. **κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬**: UI, λΉ„μ¦λ‹μ¤ λ΅μ§, λ°μ΄ν„° μ ‘κ·Ό κ³„μΈµ λ¶„λ¦¬
3. **μ¬μ‚¬μ©μ„±**: κ³µν†µ μ»΄ν¬λ„νΈμ™€ μ ν‹Έλ¦¬ν‹°λ¥Ό ν¨ν‚¤μ§€λ΅ μ¶”μ¶
4. **νƒ€μ… μ•μ •μ„±**: TypeScriptλ΅ μ—”λ“ν¬μ—”λ“ νƒ€μ… μ•μ •μ„± λ³΄μ¥

## π¨ μ•„ν‚¤ν…μ² μ›μΉ™

### 1. λ¨λ…Έλ ν¬ κµ¬μ΅°

```
love-trip/
β”β”€β”€ apps/
β”‚   β””β”€β”€ web/              # Next.js μ• ν”λ¦¬μΌ€μ΄μ…
β”β”€β”€ packages/
β”‚   β”β”€β”€ ui/               # UI μ»΄ν¬λ„νΈ λΌμ΄λΈλ¬λ¦¬
β”‚   β”β”€β”€ shared/           # κ³µν†µ νƒ€μ… λ° μ ν‹Έλ¦¬ν‹°
β”‚   β”β”€β”€ api/              # API ν΄λΌμ΄μ–ΈνΈ
β”‚   β”β”€β”€ user/             # μ‚¬μ©μ λ„λ©”μΈ
β”‚   β”β”€β”€ couple/           # μ»¤ν” λ„λ©”μΈ
β”‚   β”β”€β”€ planner/          # μ—¬ν–‰ κ³„ν λ„λ©”μΈ
β”‚   β”β”€β”€ recommendation/   # μ¶”μ² λ„λ©”μΈ
β”‚   β”β”€β”€ expense/          # κ²½λΉ„ λ„λ©”μΈ
β”‚   β”β”€β”€ gamification/     # κ²μ΄λ―Έν”ΌμΌ€μ΄μ… λ„λ©”μΈ
β”‚   β””β”€β”€ subscription/     # κµ¬λ… λ„λ©”μΈ
β””β”€β”€ pnpm-workspace.yaml
```

### 2. λ μ΄μ–΄ κµ¬μ΅°

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Presentation Layer (apps/web)     β”‚
β”‚   - Pages, Components, Hooks         β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Domain Layer (packages/*)         β”‚
β”‚   - Business Logic, Services        β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Data Layer (packages/api)         β”‚
β”‚   - Supabase Client, API Routes     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
              β†“
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   Infrastructure (Supabase)         β”‚
β”‚   - Database, Auth, Storage          β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

## π“¦ λ¨λ…Έλ ν¬ κµ¬μ΅°

### apps/web

Next.js 15 κΈ°λ° μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…

**κµ¬μ΅°**:

```
apps/web/
β”β”€β”€ src/
β”‚   β”β”€β”€ app/              # App Router νμ΄μ§€
β”‚   β”β”€β”€ components/      # React μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ features/    # κΈ°λ¥λ³„ μ»΄ν¬λ„νΈ
β”‚   β”‚   β”β”€β”€ layout/      # λ μ΄μ•„μ›ƒ μ»΄ν¬λ„νΈ
β”‚   β”‚   β””β”€β”€ shared/      # κ³µμ  μ»΄ν¬λ„νΈ
β”‚   β””β”€β”€ hooks/           # μ»¤μ¤ν…€ ν›…
```

**μ±…μ„**:

- UI λ λ”λ§
- μ‚¬μ©μ μΈν„°λ™μ… μ²λ¦¬
- λΌμ°ν…
- ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ μƒνƒ κ΄€λ¦¬

### packages/ui

μ¬μ‚¬μ© κ°€λ¥ν• UI μ»΄ν¬λ„νΈ λΌμ΄λΈλ¬λ¦¬

**μ±…μ„**:

- λ””μμΈ μ‹μ¤ν… μ»΄ν¬λ„νΈ
- μ¤νƒ€μΌ ν† ν°
- κ³µν†µ UI ν¨ν„΄

**μ‚¬μ© μμ‹**:

```typescript
import { Button, Card } from "@lovetrip/ui/components"
```

### packages/shared

κ³µν†µ νƒ€μ…, μ ν‹Έλ¦¬ν‹°, μƒμ

**μ±…μ„**:

- TypeScript νƒ€μ… μ •μ
- κ³µν†µ μ ν‹Έλ¦¬ν‹° ν•¨μ
- μƒμ κ°’

**μ‚¬μ© μμ‹**:

```typescript
import type { Place, TravelPlan } from "@lovetrip/shared/types"
import { formatDate } from "@lovetrip/shared/utils"
```

### packages/api

API ν΄λΌμ΄μ–ΈνΈ λ° μ„λ²„ μ‚¬μ΄λ“ λ΅μ§

**κµ¬μ΅°**:

```
packages/api/
β”β”€β”€ supabase/
β”‚   β”β”€β”€ client.ts        # λΈλΌμ°μ € ν΄λΌμ΄μ–ΈνΈ
β”‚   β””β”€β”€ server.ts        # μ„λ²„ ν΄λΌμ΄μ–ΈνΈ
β””β”€β”€ clients/             # μ™Έλ¶€ API ν΄λΌμ΄μ–ΈνΈ
```

**μ±…μ„**:

- Supabase ν΄λΌμ΄μ–ΈνΈ μƒμ„±
- μ™Έλ¶€ API ν†µμ‹ 
- λ°μ΄ν„° λ³€ν™

### packages/\* (λ„λ©”μΈ ν¨ν‚¤μ§€)

λΉ„μ¦λ‹μ¤ λ„λ©”μΈλ³„ ν¨ν‚¤μ§€

**ν¨ν„΄**:

```
packages/{domain}/
β”β”€β”€ services/            # λΉ„μ¦λ‹μ¤ λ΅μ§
β”β”€β”€ components/          # λ„λ©”μΈ νΉν™” μ»΄ν¬λ„νΈ
β”β”€β”€ hooks/              # λ„λ©”μΈ νΉν™” ν›…
β””β”€β”€ types/              # λ„λ©”μΈ νƒ€μ…
```

**μμ‹**:

- `packages/planner/`: μ—¬ν–‰ κ³„ν λ΅μ§
- `packages/expense/`: κ²½λΉ„ κ΄€λ¦¬ λ΅μ§
- `packages/recommendation/`: μ¶”μ² μ•κ³ λ¦¬μ¦

## π”„ λ°μ΄ν„° νλ¦„

### 1. ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„

```
User Action
  β†“
React Component
  β†“
Custom Hook / Service
  β†“
API Route (Next.js)
  β†“
Supabase Client
  β†“
Database
```

### 2. μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ

```
Database
  β†“
Supabase (Realtime)
  β†“
API Route
  β†“
React Component
  β†“
UI Update
```

### 3. μƒνƒ κ΄€λ¦¬

- **μ„λ²„ μƒνƒ**: React Query (μμ •) λλ” SWR
- **ν΄λΌμ΄μ–ΈνΈ μƒνƒ**: React Context / Zustand (ν•„μ”μ‹)
- **νΌ μƒνƒ**: React Hook Form

## π›  κΈ°μ  μ¤νƒ

### Frontend

- **Framework**: Next.js 15.2.4
- **UI Library**: React 19.2.1
- **Language**: TypeScript 5.7
- **Styling**: Tailwind CSS
- **Components**: Radix UI
- **Animation**: Framer Motion
- **Forms**: React Hook Form + Zod

### Backend

- **BaaS**: Supabase
  - PostgreSQL Database
  - Authentication
  - Row Level Security (RLS)
  - Realtime Subscriptions
  - Storage

### External APIs

- **Tour API**: ν•κµ­κ΄€κ΄‘κ³µμ‚¬ κ΄€κ΄‘ μ •λ³΄
- **λ„¤μ΄λ²„ μ§€λ„ API**: μ§€λ„ λ° μ¥μ† κ²€μƒ‰

### κ°λ° λ„κµ¬

- **Package Manager**: pnpm (workspace)
- **Testing**: Vitest, Testing Library
- **Linting**: ESLint
- **Formatting**: Prettier
- **Type Checking**: TypeScript

## π” λ³΄μ• μ•„ν‚¤ν…μ²

### μΈμ¦

- Supabase Auth μ‚¬μ©
- JWT κΈ°λ° μ„Έμ… κ΄€λ¦¬
- Row Level Security (RLS)λ΅ λ°μ΄ν„° μ ‘κ·Ό μ μ–΄

### λ°μ΄ν„° λ³΄μ•

- λ¨λ“  ν…μ΄λΈ”μ— RLS μ •μ±… μ μ©
- μ‚¬μ©μλ” μμ‹ μ λ°μ΄ν„°λ§ μ ‘κ·Ό κ°€λ¥
- μ»¤ν” κ°„ λ°μ΄ν„° κ³µμ λ” λ…μ‹μ  κ¶ν• ν•„μ”

### API λ³΄μ•

- ν™κ²½ λ³€μλ΅ λ―Όκ° μ •λ³΄ κ΄€λ¦¬
- μ„λ²„ μ‚¬μ΄λ“μ—μ„λ§ Service Role Key μ‚¬μ©
- ν΄λΌμ΄μ–ΈνΈλ” Anon Keyλ§ μ‚¬μ©

## π“ μ„±λ¥ μµμ ν™”

### ν΄λΌμ΄μ–ΈνΈ

- Next.js Image μµμ ν™”
- μ½”λ“ μ¤ν”λ¦¬ν…
- λ™μ  μ„ν¬νΈ (Dynamic Import)
- React Server Components ν™μ©

### μ„λ²„

- Edge Functions (ν•„μ”μ‹)
- ISR (Incremental Static Regeneration)
- λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ‹±
- μΏΌλ¦¬ μµμ ν™”

## π”„ λ°°ν¬ μ•„ν‚¤ν…μ²

### κ°λ° ν™κ²½

```
Local Development
  β†“
Next.js Dev Server
  β†“
Supabase (Development)
```

### ν”„λ΅λ•μ… ν™κ²½

```
Vercel (μμ •)
  β†“
Next.js Production Build
  β†“
Supabase (Production)
  β†“
CDN (Static Assets)
```

## π“ κ΄€λ ¨ λ¬Έμ„

- [ν”„λ΅μ νΈ κΈ°νμ„](./project-plan.md)
- [API λ…μ„Έμ„](./api-spec.md)
- [κ°λ° κ°€μ΄λ“](./development-guide.md)
- [μ•„ν‚¤ν…μ² κ²°μ • κΈ°λ΅](./decisions/README.md)
